(()=>{var R=Object.create;var k=Object.defineProperty;var _=Object.getOwnPropertyDescriptor;var N=Object.getOwnPropertyNames;var W=Object.getPrototypeOf,j=Object.prototype.hasOwnProperty;var K=(t,e)=>()=>(t&&(e=t(t=0)),e);var O=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var V=(t,e,i,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of N(e))!j.call(t,s)&&s!==i&&k(t,s,{get:()=>e[s],enumerable:!(r=_(e,s))||r.enumerable});return t};var d=(t,e,i)=>(i=t!=null?R(W(t)):{},V(e||!t||!t.__esModule?k(i,"default",{value:t,enumerable:!0}):i,t));function c(t){return(...e)=>{if(window["@Neos:HostPluginAPI"]&&window["@Neos:HostPluginAPI"][`@${t}`])return window["@Neos:HostPluginAPI"][`@${t}`](...e);throw new Error("You are trying to read from a consumer api that hasn't been initialized yet!")}}var g=K(()=>{});var b=O((ct,L)=>{g();L.exports=c("vendor")().React});var y=O((pt,P)=>{g();P.exports=c("NeosProjectPackages")().ReactUiComponents});g();var x=c("manifest");var o=d(b()),S=d(y());var E=t=>{if(!("linkAttributes"in t)||!t.linkAttributes||typeof t.linkAttributes!="object"||Array.isArray(t.linkAttributes))return[];let e=[];return Object.keys(t.linkAttributes).forEach(i=>{let r=t.linkAttributes[i];if(!r)return;if(typeof r=="string")return e.push({attribute:i,label:r});if(typeof r!="object"||Array.isArray(r)||!("label"in r&&typeof r.label=="string"))return;let s="help"in r&&typeof r.help=="string"?r.help:void 0,u="placeholder"in r&&typeof r.placeholder=="string"?r.placeholder:void 0;return e.push({attribute:i,label:r.label,help:s,placeholder:u})}),e};var l=d(b()),f=d(y()),C=({inputId:t,option:e,i18nRegistry:i})=>{let[r,s]=(0,l.useState)(!1),u=()=>s(n=>!n);return l.default.createElement("div",null,l.default.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},l.default.createElement(f.Label,{htmlFor:t},i.translate(e.label)),e.help&&l.default.createElement("span",{role:"button",onClick:u},l.default.createElement(f.Icon,{icon:"question-circle"}))),e.help&&r&&l.default.createElement(f.Tooltip,{renderInline:!0},i.translate(e.help)))};var A=t=>t.reduce((e,[i,r])=>(e[i]=r,e),{});var U={display:"flex",padding:8,gap:8,flexWrap:"wrap"},v=t=>{let{onLinkChange:e}=t,[i,r]=(0,o.useState)({}),s=(0,o.useMemo)(()=>E(t.linkingOptions),[t.linkingOptions]);(0,o.useEffect)(()=>{try{let n=new URL(t.linkValue);n.search&&(n.searchParams,r(A(s.map(a=>[a.attribute,n.searchParams.get(a.attribute)??""]))))}catch{r(A(s.map(a=>[a.attribute,""])))}},[t.linkValue,s]);let u=(0,o.useCallback)(n=>a=>{r(p=>{let I={...p,[n]:a};try{let h=new URL(t.linkValue),m=h.searchParams;a.length===0&&m.has(n)?m.delete(n):m.set(n,a),e(h.toString())}catch{}return I})},[t.linkValue,e]);return o.default.createElement("div",{style:U},s.map((n,a)=>{let p=`link-attribute-input-${a}`;return o.default.createElement("div",{key:n.attribute},o.default.createElement(C,{option:n,inputId:p,i18nRegistry:t.i18nRegistry}),o.default.createElement(S.TextInput,{id:p,value:i[n.attribute],onChange:u(n.attribute),placeholder:t.i18nRegistry.translate(n.placeholder)}))}))};x("Prgfx.Neos.LinkEditor:LinkEditor",{},t=>{t.get("containers").set("LinkInput/OptionsPanel/LinkAttributeEditor",v,"end");let i=t.get("dataLoaders").get("LinkLookup"),r=i.resolveValue,s=(u,n)=>{let a=typeof n=="string"&&/^node:\/\//.test(n)?n.split("?")[0]:n;return r.call(i,u,a)};i.resolveValue=s.bind(i)});})();
